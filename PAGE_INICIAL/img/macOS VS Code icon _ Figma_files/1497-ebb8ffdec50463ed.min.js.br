"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fc586050-2983-50c0-9c5b-f3ccb28788a4")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1497],{257512:(e,t,s)=>{s.d(t,{$7:()=>N,Mt:()=>y,Ud:()=>D});var r=s(411855),a=s(188507),n=s(776250),i=s(367253),d=s(358145),p=s(966712),c=s(27087),o=s(881388),l=s(939863),u=s(182976),m=s(995852),_=s(229403),b=s(99506),h=s(622139),E=s(479296),A=s(738269),S=s(195971),C=s(860178),T=s(336599),g=s(243987);function N(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.payment);function s(s){e(m.Az({numWhiteboardEditors:t.numWhiteboardEditors+s}))}function r(s){e(m.js({numDesignEditors:t.numDesignEditors+s}))}return{increment:function(e,t){(0,i.nD)(t)||("whiteboard"===e?s(1):r(1))},decrement:function(e,t){(0,i.nD)(t)||("whiteboard"===e?s(-1):r(-1))}}}let D=(0,E.D)(({teamId:e,jamboardPromoCodeId:t})=>{let s=(0,a.wA)(),u=(0,a.d4)(e=>e.loadingState),E=(0,a.d4)(t=>e?t.teamUserByTeamId[e]:null),N=(0,a.d4)(e=>e.selectedView),D=(0,C.iZ)(),[O,v]=(0,r.useState)(!0),f=(0,d.Z)(e),I=_.Xw.loadingKeyForPayload({teamId:e}),x=(0,T.GH)(u,I),P=(0,p.DC)();(0,r.useEffect)(()=>{s(_.Xw({teamId:e}))},[s,e]);let w=function(){let e=(0,a.wA)();return(0,r.useCallback)(t=>{(0,n.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(m.eK(t))},[e])}();return(0,r.useEffect)(()=>{async function r(t){var r;try{let r=await c.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});s(m.i({taxes:r.data.meta.estimate}))}catch(t){let e=(0,l.Jv)(t);e&&(null==(r=null==t?void 0:t.data)?void 0:r.reason)==="PROMOTION_CODE_ID_ERROR"?s(m.Qg({error:e,errorCode:"PROMOTION_CODE_ID_ERROR"})):s(o.s.error((0,l.t)("payments.errors.estimate_calculation_error"))),s(A.$T({...N,paymentStep:h.tn.PAYMENT_AND_ADDRESS}))}v(!1)}if(void 0===f||f===e||O||(y(s),v(!0)),(!e||x)&&O){let n=(0,g.BR)(E,D),d=Object.entries(n).map(([e,t])=>{if((0,i.nD)(t.email||""))return e}).filter(e=>!!e);s(m.M2({figmaEmailTeamUsers:d}));let p=(0,S.lX)({teamId:e,userId:null==D?void 0:D.id});if(p){p.editorStatusChanges=(0,S.nt)(p.editorStatusChanges,n);let i=(0,g.Ky)(n,p.editorStatusChanges,b._Y.DESIGN),c=(0,g.Ky)(n,p.editorStatusChanges,b._Y.WHITEBOARD),o=i+p.numEmptyDesignSeats,l=c+p.numEmptyWhiteboardSeats;if(w({numDesignEditors:o,numWhiteboardEditors:l,editorStatusChanges:p.editorStatusChanges,teamId:e,updatedAt:p.updatedAt}),P){var a;let e=(a=P.billing_period,h.tY[h.tY[a]]);s(m.Lo({billingPeriod:e})),s(m.$h({vatGstId:P.vat_gst_id})),s(m.yy({legalName:P.customer_legal_name||P.company_name,displayName:P.display_name})),s(m.Ef({regionalVatGstId:P.regional_vat_gst_id})),r({address:P.address,editor_status_changes:p.editorStatusChanges,figma_email_team_users:d,selected_currency:P.currency,annual_quantity:(0,g.fD)(e,o),monthly_quantity:(0,g.Rq)(e,o),annual_whiteboard_quantity:(0,g.fD)(e,l),monthly_whiteboard_quantity:(0,g.Rq)(e,l),vat_gst_id:P.vat_gst_id,regional_vat_gst_id:P.regional_vat_gst_id,promotion_code_id:t})}else v(!1)}else v(!1)}},[s,x,E,f,e,D,O,P,N,w,t]),(0,r.useEffect)(()=>()=>{e&&R(s,e)},[s,e]),O}),R=(0,E.D)((e,t)=>{let s=_.Xw.loadingKeyForPayload({teamId:t});e(u.yH({key:s}))});function y(e){e(m.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[]}}})),e(m.js({numDesignEditors:0})),e(m.Az({numWhiteboardEditors:0}))}},720608:(e,t,s)=>{let r;s.d(t,{kR:()=>N,vU:()=>D});var a=s(411855),n=s(188507),i=s(935283),d=s(966712),p=s(48793),c=s(939863),o=s(738269),l=s(507877),u=s(101505),m=s(672517),_=s(195971),b=s(860178),h=s(257512),E=s(622139),A=s(637590),S=s(396754);function C(e){return a.createElement(m.$z,{type:"button",className:S.Nd,trackingProperties:{trackingDescriptor:u.c.CANCEL},onClick:e.onClick},a.createElement(c.Tx,{id:"pro_cart.breadcrumbs.cancel"}))}var T=((r=T||{})[r.PLAN_COMPARISON=0]="PLAN_COMPARISON",r[r.CREATE_TEAM=1]="CREATE_TEAM",r[r.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",r[r.ADJUST_EDITORS=3]="ADJUST_EDITORS",r[r.SET_EDITORS=4]="SET_EDITORS",r[r.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",r[r.CONFIRM_PAY=6]="CONFIRM_PAY",r);function g(e,t,s,r){let a=t===E.tY.STUDENT,n=[];switch(e){case A.SC.CREATE_AND_UPGRADE:n.push(0),n.push(1),a?n.push(4):s||(n.push(4),n.push(5)),n.push(6);break;case A.SC.UPGRADE_EXISTING_TEAM:r===A.Sc.TEAM?(n.push(3),a||n.push(5)):a?(n.push(0),n.push(3)):s?n.push(0):(n.push(0),n.push(4),n.push(5)),n.push(6);break;case A.SC.CREATE:n.push(1),n.push(2),n.push(0),r===A.Sc.TEAM&&(a?n.push(4):s||(n.push(4),n.push(5)),n.push(6));break;default:(0,i.xb)(e)}return n.map(e=>(function(e){switch(e){case 0:return{step:E.tn.PLAN_COMPARISON,text:(0,c.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:E.tn.CREATE_TEAM,text:(0,c.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:E.tn.ADD_COLLABORATORS,text:(0,c.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:E.tn.CHOOSE_PLAN,text:(0,c.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:E.tn.CHOOSE_PLAN,text:(0,c.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:E.tn.PAYMENT_AND_ADDRESS,text:(0,c.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:E.tn.CONFIRM_PAY,text:(0,c.t)("pro_cart.breadcrumbs.review")}}})(e))}function N(e,t,s,r,a,n){let i=g(t,s,r,a).map(e=>e.step),d=i.indexOf(e);return n=n||i[0],-1===d?n:i[d+1]}function D(e){var t;let{selectedView:s}=e,{teamId:r,paymentStep:i,teamFlowType:c}=s,u=(0,n.wA)(),m=(0,n.d4)(e=>e.payment.billingPeriod),T=null==(t=(0,b.iZ)())?void 0:t.id,N=g(c,m,(0,n.d4)(e=>e.payment.promo),e.selectedView.planType||A.Sc.UNDETERMINED),D=N.findIndex(e=>e.step===i);return a.createElement("div",{className:S.N6},a.createElement(C,{onClick:()=>{var e;((0,d.sj)(),(0,h.Mt)(u),(0,A.h5)(c)&&null===r&&(0,_.Al)(T),(0,d.kc)().ps_benchmark&&T)?r?u(l._l({workspace:{userId:T,teamId:r,orgId:null},view:{view:"recentFiles"}})):u(o.$T(s.previousView||{view:"recentFiles"})):u(o.$T(s.previousView||(r?{view:"team",teamId:r}:{view:"recentFiles"}))),null==(e=s.callbackOnClose)||e.call(s)}}),N.map((e,t)=>a.createElement(p.On,{key:e.text,selected:i===e.step,number:t+1,text:e.text,canClick:t<D,lightText:!0,onClick:()=>{u(o.$T({...s,paymentStep:e.step,billingPeriod:m===E.tY.UNSPECIFIED?void 0:m,planType:(0,A.ck)(c,e.step)?A.Sc.UNDETERMINED:s.planType,teamFlowType:(0,A.jX)(c)&&e.step===E.tn.PLAN_COMPARISON?A.SC.CREATE_AND_UPGRADE:s.teamFlowType}))}})))}},848044:(e,t,s)=>{s.d(t,{I:()=>a});var r=s(411855);class a extends r.Component{render(){return r.createElement("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32}},r.createElement("div",{className:"persisted_error--sideBar--C-abH"}),r.createElement("div",{className:"persisted_error--message--EiciR"},this.props.message))}}},48793:(e,t,s)=>{s.d(t,{On:()=>n,Kh:()=>p,JR:()=>d});var r=s(411855),a=s(935283);class n extends r.PureComponent{render(){(0,a.KF)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,a.KF)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+="step_breadcrumb--stepSelected--aaq-4 step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--whiteText--TeOgy")):(e+="step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--greyText--Xid8Q")),this.props.canClick&&(this.props.lightText?e+=" step_breadcrumb--stepClickableLight--e7tX-":e+=" step_breadcrumb--stepClickable--t001q step_breadcrumb--step--h0dTR step_breadcrumb--stepClickable-on-hover---oTm4"),r.createElement("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick()},r.createElement("span",{className:"step_breadcrumb--stepNumber--0A5tz"},String.fromCharCode(9311+this.props.number)),this.props.text)}}n.displayName="StepBreadcrumb";class i extends r.PureComponent{render(){return r.createElement("div",{className:"step_breadcrumb--stepBreadcrumbSpacer--baFNr"})}}i.displayName="StepBreadcrumbSpacer";class d extends r.PureComponent{render(){return r.createElement("div",{className:`step_breadcrumb--stepTitle--kyggE text--fontPos22--4H4Fc text--_fontBase--QdLsd ${this.props.className||""}`},this.props.children)}}d.displayName="StepTitle";class p extends r.PureComponent{render(){return r.createElement("div",{className:"step_breadcrumb--stepInstructions--gjSRc text--fontPos14--OL9Hp text--_fontBase--QdLsd",...this.props})}}p.displayName="StepInstructions"}}]);

//# debugId=fc586050-2983-50c0-9c5b-f3ccb28788a4

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/95dfd14aa7f781083e33d36c521a587033fa64ec/1497-ebb8ffdec50463ed.min.js.map